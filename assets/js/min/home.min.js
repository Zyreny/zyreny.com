document.addEventListener("DOMContentLoaded",(()=>{initPage("Zyreny - 創造、探索、突破","我是Zyreny，一個喜歡程式設計的國中生，專注於網頁前端開發、平面設計。這裡有我的作品集和最新消息。"),loadFonts(["Fira Code","Huninn","Noto Sans TC"]),loadNav([{id:"home",name:"首頁",href:"#"},{id:"about",name:"關於我",href:"#About"},{id:"projects",name:"作品",href:"#Projects"},{id:"store",name:"商店",href:"#Store"},{id:"news",name:"新聞",href:"#News"},{id:"contact",name:"聯絡",href:"#Contact"}])}));const API_URL="https://api.zyreny.com/data",newsPerPage=3;let currentPage=1,allNews=[],totalPages=0;const categoryCN={"web-update":"網站更新","proj-update":"專案更新","new-proj":"新作品"};async function fetchProjs(e){const n=await fetch(e),t=await n.json();let a=document.querySelector(".projs-list");a.innerHTML="";for(let e=0;e<t.length;e++){let n=t[e];a.innerHTML+=`\n        <a href="/${n.name}" class="proj">\n            <div>\n                <img src="/assets/img/projs/${n.name}.webp" alt="${n.title}" loading="lazy">\n                <h2>${n.title}</h2>\n                <p>${n.desc}</p>\n            </div>\n        </a>`}}async function fetchNews(e){const n=await fetch(e),t=await n.json();allNews=t,totalPages=Math.ceil(allNews.length/3),renderNews(1)}function renderNews(e){currentPage=e;let n=document.querySelector(".news-list");n.innerHTML="";const t=3*(e-1),a=Math.min(t+3,allNews.length);for(let e=t;e<a;e++){let t=allNews[e],a=t.created_at.replace(/-/g,"/").split(" ")[0];n.innerHTML+=`\n        <div class="new">\n            <h2>${t.title}</h2>\n            <div class="info">\n                <span class="category ${t.category}">${categoryCN[t.category]}</span>\n                <span class="date">${a}</span>\n            </div>\n            <p>${t.content}</p>\n        </div>`}renderPagination()}function renderPagination(){const e=document.querySelector(".news-pagination");if(totalPages<=1)return e.innerHTML="",void(e.style.display="none");e.style.display="flex";let n="";currentPage>1&&(n+='<button id="prevPage" class="pagination-btn">上一頁</button>'),currentPage<totalPages&&(n+='<button id="nextPage" class="pagination-btn">下一頁</button>'),e.innerHTML=n,currentPage>1&&(document.getElementById("prevPage").onclick=()=>{renderNews(currentPage-1)}),currentPage<totalPages&&(document.getElementById("nextPage").onclick=()=>{renderNews(currentPage+1)})}fetchProjs(`${API_URL}/projs/4`),fetchNews(`${API_URL}/news/list/30`);